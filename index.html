<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TPV Accesorios Â· Dinamita Apps</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <img id="logoPreview" src="assets/logo_default.svg" alt="Logo" />
      <div>
        <h1>TPV Accesorios</h1>
        <p class="subtitle">Ventas Â· Inventario Â· Tickets 58mm</p>
      </div>
    </div>
    <div class="header-actions">
      <button class="btn" id="btnGuardar">ðŸ’¾ Guardar</button>
      <button class="btn ghost" id="btnRestaurarDemo" title="Restaura productos de ejemplo">â†º Demo</button>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-tab="ventas">Ventas</button>
    <button class="tab" data-tab="inventario">Inventario</button>
    <button class="tab" data-tab="historial">Historial</button>
    <button class="tab" data-tab="config">ConfiguraciÃ³n</button>
  </nav>

  <main>
    <!-- VENTAS -->
    <section class="tab-panel show" id="ventas">
      <div class="ventas-layout">
        <aside class="productos">
          <div class="toolbar">
            <input type="search" id="searchProducto" placeholder="Buscar productoâ€¦" />
            <select id="filterCategoria">
              <option value="">CategorÃ­as</option>
            </select>
          </div>
          <div id="gridProductos" class="grid"></div>
        </aside>
        <section class="carrito">
          <h2>Carrito</h2>
          <div id="listaCarrito" class="list"></div>
          <div class="totales">
            <div class="row"><span>Subtotal:</span><strong id="subTotal">$0.00</strong></div>
            <div class="row"><span>IVA (16%):</span><strong id="iva">$0.00</strong></div>
            <div class="row total"><span>Total:</span><strong id="total">$0.00</strong></div>
          </div>
          <div class="pago">
            <label>MÃ©todo de pago
              <select id="metodoPago">
                <option value="efectivo">Efectivo</option>
                <option value="tarjeta">Tarjeta</option>
                <option value="transferencia">Transferencia</option>
              </select>
            </label>
            <label>Monto recibido
              <input type="number" id="montoRecibido" min="0" step="0.01" placeholder="0.00" />
            </label>
            <div class="row"><span>Cambio:</span><strong id="cambio">$0.00</strong></div>
          </div>
          <div class="acciones-carrito">
            <button class="btn" id="btnCobrar">âœ… Cobrar & Imprimir Ticket</button>
            <button class="btn ghost" id="btnVaciar">ðŸ—‘ Vaciar</button>
          </div>
        </section>
      </div>
    </section>

    <!-- INVENTARIO -->
    <section class="tab-panel" id="inventario">
      <div class="inventario-actions">
        <button class="btn" id="btnNuevoProd">ï¼‹ Nuevo</button>
        <button class="btn ghost" id="btnExportarJSON">â¬‡ Exportar JSON</button>
        <label class="btn ghost">
          â¬† Importar JSON
          <input type="file" id="importJSON" accept="application/json" hidden />
        </label>
      </div>
      <table class="tabla" id="tablaInventario">
        <thead>
          <tr>
            <th>Foto</th><th>Nombre</th><th>SKU</th><th>CategorÃ­a</th><th>Precio</th><th>Stock</th><th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- HISTORIAL -->
    <section class="tab-panel" id="historial">
      <div class="hist-actions">
        <button class="btn ghost" id="btnExportarCSV">â¬‡ Exportar CSV</button>
        <button class="btn ghost" id="btnBorrarHistorial">ðŸ—‘ Borrar historial</button>
      </div>
      <table class="tabla" id="tablaHistorial">
        <thead>
          <tr><th>Folio</th><th>Fecha</th><th>Total</th><th>MÃ©todo</th><th>ArtÃ­culos</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- CONFIG -->
    <section class="tab-panel" id="config">
      <h2>Datos del negocio</h2>
      <div class="config-grid">
        <label>Nombre del negocio
          <input type="text" id="cfgNombre" placeholder="Ej. Tienda Dinamita" />
        </label>
        <label>DirecciÃ³n
          <input type="text" id="cfgDireccion" placeholder="Calle, nÃºmero, colonia, ciudad" />
        </label>
        <label>TelÃ©fono / WhatsApp
          <input type="text" id="cfgTelefono" placeholder="+52 ..." />
        </label>
        <label>Pie del ticket
          <input type="text" id="cfgPie" placeholder="Gracias por su compra ðŸ’¥" />
        </label>
        <label>Logo (aparece en la app y ticket)
          <input type="file" id="cfgLogo" accept="image/*" />
        </label>
        <button class="btn" id="btnGuardarConfig">Guardar configuraciÃ³n</button>
      </div>
      <p class="muted">Nota: todo se guarda en este dispositivo con <strong>localStorage</strong>. Para usar en varias cajas, exporta/importa JSON del inventario e instala la app en cada equipo.</p>
    </section>
  </main>

  <!-- MODAL PRODUCTO -->
  <dialog id="dlgProducto">
    <form method="dialog" class="form">
      <h3 id="dlgTitle">Nuevo producto</h3>
      <div class="form-grid">
        <label>Nombre
          <input type="text" id="pNombre" required />
        </label>
        <label>SKU
          <input type="text" id="pSKU" />
        </label>
        <label>CategorÃ­a
          <input type="text" id="pCategoria" placeholder="Gorras, Playeras, etc." />
        </label>
        <label>Precio
          <input type="number" id="pPrecio" min="0" step="0.01" required />
        </label>
        <label>Stock
          <input type="number" id="pStock" min="0" step="1" required />
        </label>
        <label>Foto
          <input type="file" id="pFoto" accept="image/*" />
        </label>
        <input type="hidden" id="pIndex" />
      </div>
      <menu>
        <button value="cancel" class="btn ghost">Cancelar</button>
        <button id="btnGuardarProducto" class="btn">Guardar</button>
      </menu>
    </form>
  </dialog>

  <!-- TICKET (IMPRESIÃ“N 58mm) -->
  <iframe id="ticketFrame" title="ticket" style="display:none;"></iframe>

  <footer class="app-footer">
    <small>Esta app es diseÃ±ada por <strong>Dinamita Apps</strong>. Logo editable por el usuario.</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
